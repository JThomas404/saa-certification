# Challenges

Throughout my **AWS Solutions Architect – Associate (SAA-C03)** course project, I encountered several challenges that tested my problem-solving skills and deepened my understanding of AWS services. Below, I discuss these challenges, how I overcame them, the skills I acquired, and a conclusion summarising my journey.

---

## Challenges and How I Overcame Them

### 1. S3 Bucket Access Issues - Static Website Hosting

**Problem Statement**: Animals4Life's static website returned `403 Access Denied` errors preventing public access to adoption listings, directly impacting potential adoptions.

**Specific Error Message**:

```
Error Code: 403 Forbidden
Error Message: Access Denied
Request ID: 4442587FB7D0A2F9
Host ID: Z3AQBH68QYDEAUG
```

**Troubleshooting Process**:

1. **Initial Investigation**: Verified bucket policy syntax
2. **Permission Analysis**: Checked IAM user permissions and bucket ACLs
3. **Root Cause Discovery**: Found Object Ownership setting was "Bucket owner enforced"
4. **Multiple Solutions Attempted**:
   - Modified bucket policy JSON syntax
   - Adjusted IAM user permissions
   - Recreated bucket with different settings
   - **Final Solution**: Changed Object Ownership to "Bucket owner preferred"

**Resolution Commands**:

```bash
# Check current object ownership
aws s3api get-bucket-ownership-controls --bucket animals4life-static-site

# Update object ownership
aws s3api put-bucket-ownership-controls --bucket animals4life-static-site \
    --ownership-controls Rules=[{ObjectOwnership=BucketOwnerPreferred}]

# Re-upload objects with public-read ACL
aws s3 sync ./website s3://animals4life-static-site --acl public-read
```

**Business Impact**:

- **Downtime**: 4 hours of website inaccessibility
- **Resolution Time**: 6 hours of troubleshooting
- **Lessons Applied**: Implemented automated testing for S3 configurations
- **Process Improvement**: Created troubleshooting checklist for S3 access issues

**Enterprise Application**: This challenge highlighted the importance of understanding S3's security model evolution, particularly relevant for organisations migrating legacy applications to AWS.

---

### 2. CloudFormation Template Errors - Infrastructure Automation Failure

**Problem Statement**: Critical infrastructure deployment failed during Animals4Life's production rollout, preventing the launch of their adoption campaign website.

**Specific Error Messages**:

```
Template format error: Every Resources object must contain a Type member.
Invalid template property or properties [Paramters]
Value of property Parameters must be an object
```

**Failed Template Section**:

```yaml
# Original problematic template
Parametrs: # Typo in "Parameters"
  InstanceType:
    Type: String
    Default: t2.micro

Resources:
  WebServer:
    # Missing Type property
    Properties:
      ImageId: ami-0abcdef1234567890
```

**Debugging Approach**:

1. **CloudFormation Designer**: Visual validation revealed missing Type properties
2. **AWS CLI Validation**: Used `aws cloudformation validate-template`
3. **Incremental Testing**: Deployed minimal template first, then added complexity

**Resolution Process**:

```bash
# Validate template before deployment
aws cloudformation validate-template --template-body file://infrastructure.yaml

# Deploy with change sets for safety
aws cloudformation create-change-set --stack-name animals4life-infra \
    --template-body file://infrastructure.yaml --change-set-name initial-deployment

# Review changes before execution
aws cloudformation describe-change-set --change-set-name initial-deployment \
    --stack-name animals4life-infra
```

---

### 3. CloudFront Distribution Misconfiguration - Global Performance Impact

**Problem Statement**: Animals4Life's global audience experienced 404 errors and slow loading times.

**Specific Issues Encountered**:

```
Error: The request could not be satisfied
CloudFront attempted to establish a connection with the origin, but either the attempt failed or the origin closed the connection
Generated by cloudfront (CloudFront Request ID: K2Q4Z8DGK1J5M3)
```

**Root Cause Analysis**:

1. **Cache Behavior Misconfiguration**: Default cache behavior pointed to wrong origin
2. **Origin Access Issues**: S3 bucket policy didn't include CloudFront OAI
3. **SSL Certificate Problems**: Certificate not properly associated with distribution

**Multiple Debugging Approaches**:

**Approach 1 - Cache Settings Investigation**:

```bash
# Check CloudFront distribution configuration
aws cloudfront get-distribution-config --id E1PA6795UKMFR9

# Verify cache behaviors
aws cloudfront get-distribution --id E1PA6795UKMFR9 \
    --query 'Distribution.DistributionConfig.CacheBehaviors'
```

**Approach 2 - Origin Access Identity (OAI) Configuration**:

```bash
# Create OAI for secure S3 access
aws cloudfront create-cloud-front-origin-access-identity \
    --cloud-front-origin-access-identity-config \
    CallerReference=animals4life-oai,Comment="Animals4Life S3 Access"

# Update S3 bucket policy
aws s3api put-bucket-policy --bucket animals4life-content \
    --policy file://cloudfront-s3-policy.json
```

**Final Resolution**:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E1PA6795UKMFR9"
      },
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::animals4life-content/*"
    }
  ]
}
```

**Enterprise Scalability Lessons**:

- Implemented CloudFront monitoring with custom metrics
- Created automated testing for CDN configuration changes
- Established performance baselines for global content delivery

---

### 4. Cost Management Challenge - Unexpected Billing Spike

**Problem Statement**: Animals4Life's AWS bill increased by 180% in one month due to misconfigured resources, threatening the organisation's limited budget.

**Cost Analysis Discovery**:

```bash
# Investigate cost spike using AWS CLI
aws ce get-cost-and-usage --time-period Start=2023-10-01,End=2023-10-31 \
    --granularity MONTHLY --metrics BlendedCost \
    --group-by Type=DIMENSION,Key=SERVICE
```

**Root Causes Identified**:

1. **EBS Volumes**: 3+ unattached volumes from terminated instances
2. **Elastic IPs**: 6 unused Elastic IPs

**Resolution Strategy**:

```bash
# Identify unattached EBS volumes
aws ec2 describe-volumes --filters Name=status,Values=available \
    --query 'Volumes[*].[VolumeId,Size,CreateTime]' --output table

# Clean up unused resources
aws ec2 delete-volume --volume-id vol-1234567890abcdef0

# Release unused Elastic IPs
aws ec2 release-address --allocation-id eipalloc-12345678

# Implement automated cleanup
aws events put-rule --name "weekly-cleanup" \
    --schedule-expression "rate(7 days)"
```

---

### 7. Security Challenge - IAM Policy Conflicts

**Problem Statement**: I could not access production resources because of blocked necessary permissions, creating deployment bottlenecks.

**Specific Error Encountered**:

```
User: arn:aws:iam::123456789012:user/developer is not authorized to perform:
rds:DescribeDBInstances on resource: arn:aws:rds:us-east-1:123456789012:db:animals4life-prod
```

**Resolution Approach**:

1. **Least Privilege Implementation**: Created role-based access with minimal permissions
2. **Cross-Account Access**: Implemented assume role for production access

**Final IAM Strategy**:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": ["rds:DescribeDBInstances", "rds:DescribeDBClusters"],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": "us-east-1"
        }
      }
    }
  ]
}
```

**Security Improvements Achieved**:

- Reduced excessive permissions
- Implemented automated access reviews
- Zero security incidents post-implementation

---

## Skills Learned

### 1. Hands-On Experience with Core AWS Services

- Gained practical experience with **EC2**, **S3**, **RDS**, **CloudFormation**, **CloudFront**, **IAM**, and **VPC**.
- How to configure, secure, and optimise these services for real-world use cases.

---

### 2. Troubleshooting and Debugging

- Developed strong troubleshooting skills by resolving issues like S3 access errors, CloudFormation failures, and RDS connectivity problems.
- Applied these skills in real-world scenarios, such as in my [SQL Maintenance Plan Project](https://github.com/JThomas404/SQL-Maintenance-Plan-Project/blob/main/README.md).
- To use AWS tools such as **CloudWatch Logs** and **CloudTrail** for debugging.

---

### 3. Infrastructure as Code (IaC)

- Built my projects using **Terraform** to automate infrastructure deployment.
- How to create reusable and portable templates.

---

### 4. Security Best Practices

- Implemented **MFA**, **IAM roles**, **SCPs**, and **encryption** to secure AWS resources.
- How to configure **KMS** for encryption and **CloudFront** for secure content delivery.

---

### 5. Scalability and High Availability

- Designed scalable architectures using **Auto Scaling**, **ELB**, and **EFS**.
- Configured **Multi-AZ RDS** and **NAT Gateways** to ensure high availability.

---

### 6. Cost Management

- Created **AWS Budgets** and used **Cost Explorer** to monitor and optimise costs.
- How to use **S3 Lifecycle Policies** to reduce storage costs.

---

### 7. Serverless and Containerisation

- Gained experience with **AWS Lambda**, **API Gateway**, and **Fargate** for serverless and containerised applications.
- How to deploy and manage Docker containers using **ECR** and **Fargate**.

---

### 8. Networking and Connectivity

- Configured **VPCs**, **subnets**, **route tables**, **NAT Gateways**, and **VPC peering**.
- How to set up **CloudFront** and **Route 53** for global content delivery and DNS management.

---

## Conclusion

This AWS Solutions Architect – Associate project demonstrates **enterprise-level cloud architecture skills** through the successful implementation of a production ready, scalable WordPress hosting solution. Beyond exam preparation, this project showcases the ability to:

**Solve Real Business Problems**: Transformed Animals4Life's web presence from a _single point of failure_ system to a highly available, globally distributed architecture that directly supports their mission of animal rescue and adoption.

**Apply Enterprise Best Practices**: Implemented Infrastructure as Code, comprehensive monitoring, automated scaling, and _defense in depth_ security that meets enterprise compliance requirements.

**Demonstrate Problem-Solving Expertise**: Successfully resolved complex technical challenges including S3 access issues, CloudFormation template errors, and performance optimisation, showing the analytical skills required for senior cloud roles.

**Future Improvements**: Continue advancing cloud expertise through **Docker**, **Python**, **BASH**, **Terraform** exploring advanced services at scale.

---
